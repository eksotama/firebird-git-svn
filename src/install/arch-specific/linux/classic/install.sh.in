#!/bin/sh

#  This library is part of the FirebirdSQL project
#
#  This library is free software; you can redistribute it and/or
#  modify it under the terms of the GNU Lesser General Public
#  License as published by the Free Software Foundation; either
#  version 2.1 of the License, or (at your option) any later version.
#  You may obtain a copy of the Licence at
#  http://www.gnu.org/licences/lgpl.html
#  
#  As a special exception this file can also be included in modules
#  with other source code as long as that source code has been 
#  released under an Open Source Initiative certificed licence.  
#  More information about OSI certification can be found at: 
#  http://www.opensource.org 
#  
#  This module is distributed in the hope that it will be useful,
#  but WITHOUT ANY WARRANTY; without even the implied warranty of
#  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#  GNU Lesser General Public Licence for more details.
#  
#  This module was created by members of the firebird development 
#  team.  All individual contributions remain the Copyright (C) of 
#  those individuals and all rights are reserved.  Contributors to 
#  this file are either listed below or can be obtained from a CVS 
#  history command.
# 
#   Created by:  Mark O'Donohue <mark.odonohue@ludwig.edu.au>
# 
#   Contributor(s):
#  
# 
#   $Id: install.sh.in,v 1.1 2002-11-11 05:56:38 skywalker Exp $
# 
#
# Script to install files from the build/transport area

# A little bit of tidying up of some odd files not in the original build
# These files will exist in the CVS tree.  
# If this is a tar.gz install rather than the result of a build then
# We assume the files have already been copied here manually.

    if  [ -z "$FirebirdInstallPrefix" ]
       then
        FirebirdInstallPrefix=@prefix@
    fi

    if  [ -z "$FirebirdBuildPrefix" ]
       then
        FirebirdBuildPrefix="."
    fi

    BuildDir=$FirebirdBuildPrefix/firebird
    DestDir=$FirebirdInstallPrefix


#  I think this is done as part of the build now.
#    if [ -z "$InteractiveInstall" ] 
#      then
#        ScriptsSrcDir=src/install/linux
#        cp $ScriptsSrcDir/misc/README $BuildDir
#    fi

# The guts of the tranfer of files to /opt and other directories

    if [ -d $DestDir ] 
      then 
        rm -rf $DestDir 
    fi 
    mkdir $DestDir 
    mkdir $DestDir/bin 
    mkdir $DestDir/examples 
    mkdir $DestDir/help 
    mkdir $DestDir/include 
    mkdir $DestDir/intl 
    mkdir $DestDir/lib 
    mkdir $DestDir/doc 
    mkdir $DestDir/UDF 
    mkdir $DestDir/misc

    cp -f $BuildDir/bin/fb_inet_server $DestDir/bin/fb_inet_server 

    cp $BuildDir/bin/gbak $DestDir/bin/gbak 
    cp $BuildDir/bin/gdef $DestDir/bin/gdef 
    cp $BuildDir/bin/gds_lock_print $DestDir/bin/gds_lock_print 
    cp $BuildDir/bin/gds_drop $DestDir/bin/gds_drop 
    cp $BuildDir/bin/gds_lock_mgr $DestDir/bin/gds_lock_mgr 
    cp $BuildDir/bin/gds_pipe $DestDir/bin/gds_pipe 
    cp $BuildDir/bin/gfix $DestDir/bin/gfix 
    cp $BuildDir/bin/gpre $DestDir/bin/gpre 
    cp $BuildDir/bin/gsec $DestDir/bin/gsec 
    cp $BuildDir/bin/gsplit $DestDir/bin/gsplit 
    cp $BuildDir/bin/gstat $DestDir/bin/gstat 
    cp $BuildDir/bin/isc4.gbak $DestDir/bin/isc4.gbak 
    cp $BuildDir/bin/isql $DestDir/bin/isql 
    cp $BuildDir/bin/qli $DestDir/bin/qli 

    cp $BuildDir/bin/CSchangeRunUser.sh $DestDir/bin
    cp $BuildDir/bin/CSrestoreRootRunUser.sh $DestDir/bin
    cp $BuildDir/bin/changeDBAPassword.sh $DestDir/bin

    cp $BuildDir/examples/v5/*.[ceh] $DestDir/examples 
    cp $BuildDir/examples/v5/*.sql $DestDir/examples 
    cp $BuildDir/examples/v5/*.gbk $DestDir/examples 
    cp $BuildDir/examples/v5/*.gdb $DestDir/examples 
    cp $BuildDir/examples/v5/makefile $DestDir/examples 
    cp $BuildDir/help/help.gbak $DestDir/help 
    cp $BuildDir/help/help.gdb $DestDir/help 
    #cp -r $BuildDir/doc $DestDir 
    cp $BuildDir/firebird.msg $DestDir/firebird.msg 
    cp $BuildDir/isc4.gdb $DestDir/isc4.gdb 
    #cp $BuildDir/isc_config $DestDir/isc_config

    cp -f $BuildDir/include/gds.h /usr/include/gds.h 
    cp -f $BuildDir/include/iberror.h /usr/include/iberror.h 
    cp -f $BuildDir/include/ibase.h /usr/include/ibase.h 
    cp -f $BuildDir/include/ib_util.h /usr/include/ib_util.h 

    cp -f $BuildDir/misc/firebird.conf /etc/firebird.conf

#    cp $BuildDir/include/gds.f $DestDir/include 
#    cp $BuildDir/include/gds.hxx $DestDir/include 
    cp $BuildDir/include/*.h $DestDir/include 


    cp -f $BuildDir/lib/@FIREBIRD_LIBGDS_SO@ /usr/lib/@FIREBIRD_LIBGDS_SO@
    if [ -L /usr/lib/@FIREBIRD_LIBGDS_SO_LNK@ ]
      then
        rm -f /usr/lib/@FIREBIRD_LIBGDS_SO_LNK@
    fi
    ln -s @FIREBIRD_LIBGDS_SO@  /usr/lib/@FIREBIRD_LIBGDS_SO_LNK@


    if [ -L /usr/lib/@FIREBIRD_LIBGDS_SO_X_LNK@ ]
      then
        rm -f /usr/lib/@FIREBIRD_LIBGDS_SO_X_LNK@
    fi
    ln -s @FIREBIRD_LIBGDS_SO@  /usr/lib/@FIREBIRD_LIBGDS_SO_X_LNK@

#    cp -f $BuildDir/lib/gds.a /usr/lib/libgds.a 
    cp -f $BuildDir/lib/ib_util.so /usr/lib/libib_util.so 


    cp $BuildDir/intl/libfbintl.so $DestDir/intl/fbintl
    cp $BuildDir/UDF/ib_udf.so $DestDir/UDF/

#    cp $BuildDir/README $DestDir/README

    cp $BuildDir/misc/firebird.xinetd $DestDir/misc/firebird.xinetd

